<div class="report-container">
    <div class="page-header">
        <h4 class="page-title">Recent Exports</h4>
    </div>

    <div class="action-toolbar">
        <div class="toolbar-left">
            <span class="text-muted">Download your recently exported reports</span>
        </div>
        <div class="toolbar-right">
            <div class="search-box"><label>Search:</label><input type="text" class="form-control form-control-sm"
                    [(ngModel)]="searchQuery"></div>
        </div>
    </div>

    <div class="content-card">
        <div class="table-responsive">
            <table class="table table-striped table-hover align-middle mb-0">
                <thead>
                    <tr>
                        <th class="sortable">File Name <i class="fas fa-sort ms-1"></i></th>
                        <th class="sortable">Report Type <i class="fas fa-sort ms-1"></i></th>
                        <th class="sortable">Format <i class="fas fa-sort ms-1"></i></th>
                        <th class="sortable">Size <i class="fas fa-sort ms-1"></i></th>
                        <th class="sortable">Status <i class="fas fa-sort ms-1"></i></th>
                        <th class="sortable">Created By <i class="fas fa-sort ms-1"></i></th>
                        <th class="sortable">Created <i class="fas fa-sort ms-1"></i></th>
                        <th class="sortable">Expires At <i class="fas fa-sort ms-1"></i></th>
                        <th class="text-center">Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let item of filteredData">
                        <td>
                            <i class="fas me-2" [class]="getFormatIcon(item.format)"
                                [class.text-success]="item.format === 'Excel'"
                                [class.text-danger]="item.format === 'PDF'"
                                [class.text-primary]="item.format === 'CSV'"></i>
                            {{item.fileName}}
                        </td>
                        <td>{{item.reportType}}</td>
                        <td><span class="badge bg-light text-dark">{{item.format}}</span></td>
                        <td>{{item.size}}</td>
                        <td><span class="badge" [class]="getStatusClass(item.status)">{{item.status}}</span></td>
                        <td>{{item.createdBy}}</td>
                        <td>{{item.created}}</td>
                        <td>{{item.expiresAt}}</td>
                        <td class="text-center action-buttons">
                            <button class="btn btn-sm btn-outline-primary me-1" (click)="downloadFile(item.fileName)"
                                [disabled]="item.status !== 'Ready'" title="Download">
                                <i class="fas fa-download"></i>
                            </button>
                            <button class="btn btn-sm btn-outline-danger" (click)="deleteFile(item.fileName)"
                                title="Delete">
                                <i class="fas fa-trash"></i>
                            </button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="pagination-info">Showing 1 to {{filteredData.length}} of {{filteredData.length}} entries</div>
    </div>
</div>